# Проект на основе реальных данных сервиса доставки еды

**Задача:** провести комплексный анализ данных, выявить узкие места, подготовить рекомендации

## Решение:
* Детально изучен  пользовательский путь от входа до заказа
* Проведена  RFM-сегментация  пользователей 
* Выполнена кластеризация  заведений-партнеров сервиса

## Результат:
* Обнаружена и локализована  проблема в пользовательской воронке для mobile-интерфейса . Сформулированы рекомендации для оптимизации
* выявлены наиболее перспективные поведенческие сегменты для удержания и повышения выручки. Сформулированы рекомендации по взаимодействию
* Для каждого кластера заведений сформулированы  маркетинговые рекомендации

## Инструменты:  
 `Python` (`pandas`, `matplotlib` , `scikit-learn`)

<br>

## Превью:
<details>
<summary> Пользовательская воронка </summary>
 
### Анализ пользовательского пути

По имеющимся данным от разработчиков, изменения в сервисе коснулись мобильной версии приложения. Имеет смысл сравнить пользовательский путь от начала использования сервиса до оформления заказа в двух версиях приложения - мобильной и десктопной. Считаем конверсии и строим классическую воронку и step-by-step для новых пользователей.  
<img width="900" alt="Пользовательские воронки" src="https://github.com/user-attachments/assets/9df5d28a-3ac3-4b28-99eb-1ee410404f47" />  
Графики воронок показывают, что пользователи мобильной версии приложения удерживаются в нем гораздо хуже: общая конверсия для desktop-пользователей 34,2%, а для mobile-пользователей - 20,2%
* конверсия для desktop-пользователей 34,2%, а для mobile-пользователей - 20,2%:
* после авторизации до главной страницы main_page приложения доходят на 8% меньше mobile-пользователей, чем desktop-пользователей;
* а вот страница регистрации reg_page для mobile-пользователей более комфортна, до этого этапа доходят чуть больше mobile-пользователе, чем desktop-пользователей - 73,2% против 71,8%;
* основная потеря mobile-аудитории происходит на этапе подтверждения номера телефона confirm_phone - почти половина пользователей прерывает процесс регистрации на подтверждении номера. Лишь 54,9% mobile-пользователей продолжают путь, в то время как в desktop-версии таких пользователей 90,4%;
* до следующего этапа object_page доходит лишь 27,3% mobile-пользователей из тех, что авторизировались. Для desktop-версии таких пользователей больше половины - 52%. Среди тех, кто завершил процедуру регистрации только 67,9% в mobile-версии доходят до каталога блюд.

Требуется срочная оптимизация mobile-интерфейса, вероятно он не адаптирован для некоторых размеров экранов, возможно большой вес изображений усложняет загрузку. Обязательная проверка процесса подтверждения номера и упрощение верификации. Для desktop-версии фокус на упрощении регистрации, например, внедрить возможность регистрации через соцсети.

</details>

<details>
<summary> RFM сегментация </summary>

### RFM сегментация
Для RFM-сегментации нужны данные о клиенте (его идентификатор), дата и время заказа, стоимость заказа. Множественные транзакции пользователей в рамках одного дня могут исказить данные, поэтому необходимо их агрегировать.

Проведём агрегацию данных для каждого пользователя и посчитаем:
* количество дней с последней покупки как минимальное значение в днях для каждого пользователя — это давность Recency;
* частоту покупок как количество идентификаторов заказов order_id для каждого пользователя - метрика Frequency;
* и суммарную выручку service_revenue с каждого пользователя — это метрика Monetary.

Построим гистограммы значений recency, frequency, monetary, чтобы определить, какие подходы применить для сегментации:
<img width="900" alt="rfm" src="https://github.com/user-attachments/assets/65e824ea-0721-4384-aa72-0f66fa427f4e" />  
* У метрики Recency диапазон значений охватывает 62 дня (2 месяца). Для сегментации по этому признаку применим разбиение на 3 равные группы, примерно по 3 недели в каждой: давно(2 месяца), некоторое время назад (1-1,5 мес) и совсем недавно(каждые 1-3 недели)
* График метрики Frequency показывает, что число заказов варьируется в гораздо меньшем диапазоне, от 1 до 7, но преобладают пользователи с единичными покупками. Для сегментации применим разбиение на группы, чтобы получить деление пользователей на тех, кто покупает небольшое количество заказов(1 заказ), среднее количество заказов (2 заказа) и большое количество заказов (от 3 до 7 заказов).
* Распределение метрики Monetary также смещено в левую сторону. Преобладают пользователи с небольшой выручкой (до 150 рублей). Для сегментации по этому признаку применим перцентили и разделим значения на три примерно равные сегмента, чтобы учесть вариативность значений.

### Результаты сегментации:

**Самые многочисленные сегменты:**
* 213 и 212 (некоторое время назад, небольшое количество заказов, высокие/средние траты),
* 211 (некоторое время назад, небольшое количество заказов, низкие траты).
Суммарная доля около 38,4%.
Главные клиенты приложения, которых необходимо удерживать персональными предложениями.

**Самые неактивные сегменты:**
* 111, 112, 113, 123 (давно, небольшое и среднее количество заказов, высокие/средние/низкие траты)
Суммарная доля около 30,5%
Неактивные клиенты, которым нужно напоминать о себе и стимулировать с помощью скидок.

**Вероятно новых пользователей:**
* 312, 311, 313 (совсем недавно, небольшое количество заказов, высокие/средние/низкие траты).
Суммарная доля около 30,7%
Обязательно поддерживать контакт, дарить бонусы или скидки на повторный заказ

**Пользователи с редкими паттернами поведения:**
* Сегменты 223, 323, 333, 233 составляют менее 0,6% покупателей.
Доля пользователей мала, однако вероятно это самые лояльные клиенты приложения и могут привлекать новых пользователей своими рекомендациями. Поощрять за активность, предоставлять доступ к эксклюзивным предложениям. Стремиться конвертировать неактивных и мало лояльных пользователей в эту более ценную категорию.
</details>

<details>
<summary> K-Means кластеризация </summary>

 ### Кластеризация заедений

С помощью метода K-Means разделим рестораны на кластеры, отражающие различные модели работы и целевые сегменты. Это позволит выделить группы ресторанов с похожими характеристиками и разрабатывать для них эффективные маркетинговые стратегии.

Для каждого ресторана найдем:
* общее количество заказов;
* средняя стоимость заказа;
* общее число заказанных уникальных блюд.

Нормализуем полученные данные методом стандартизации Z-score и определим оптимального количества кластеров, оно равно 3:
<img height="300" alt="Количество кластеров" src="https://github.com/user-attachments/assets/7d9eb6bc-60e6-427b-bd0b-42b3c1f5853a" />  
Проводим кластеризацию:  
<img height="300" alt="Кластеризация" src="https://github.com/user-attachments/assets/bdb9ecd5-26b2-4dc2-a39f-f4eef3041b46" />

### Результаты кластеризации - все заведения можно поделить на 3 группы:  

**1 группа** - 2 заведения с большим объемом заказов, широким ассортиментом блюд, средней ценовой категорией. Популярные заведения с кухнями, пользующимися большим спросом. Возможно сетевые заведения, быстрая доставка, доступность в любом районе города.

Основной фокус на удержании существующих пользователей:
* поощрение пользователей эксклюзивными предложениями и накопительными скидками
* поддержка интереса онлайн или офлайн мероприятиями

Следующие 2 группы имеют низкий уровень заказов и ограниченный ассортимент блюд, но различаются средним чеком. Вероятно это не сетевые заведения и территория доставки для этих точек ограничена.

**2 группа** - 15 заведений с низкими ценами. Возможно булочные, чебуречный и т.д.

**3 группа** - 4 заведения с более высоким средним чеком, вероятно это небольшие кафе, узко специализированные рестораны, дорогие рестораны, например авторской кухни. Важно продвигать свою уникальность, например публикациями о необычных блюдах. Стимулировать к первому заказу, например предлагая дегустационные наборы из нескольких блюд

Основной фокус на привлечение новых пользователей:
* предоставлять скидки на первый заказ
* расширять ассортимент на основе предпочтений клиентов конкурентов
</details>


<details>
<summary> Выводы и рекомендации </summary>

### ПОЛЬЗОВАТЕЛИ и их взаимодействие с сервисом.

Данные охватывают 2 месяца: с 30 апреля по 2 июля 2021 года и содержат информацию о событиях для 8473 зарегистрированных пользователей и их заказах из 21 ресторана. Для взаимодействия с сервисом пользователи используют 2 типа платформ: мобильная и десктопная версии.

Исследования подтверждают, что проблемы с удержание пользователей действительно существует. Для каждого типа платформ проблемы видны на различных этапах. Очевидно, что последние обновления мобильной версии приложения имело негативное влияние - пользователи мобильной версии удерживаются в нем гораздо хуже.

* К моменту загрузки главной страницы приложения теряется 10% пользователей Desktop и 19% пользователей Mobile.  
Рекомендации: проверить работоспособность приложения на различных устройствах, возможна несовместимость версий и приложение зависает на моменте загрузки главной страницы.

* Этап регистрации для mobile-пользователей более комфортен, однако в целом для приложения к этому этапу теряется 27,7% пользователей.  
Рекомендации: упростить процедуру регистрации особенно для Desktop-версии, добавить возможность регистрации через соцсети

* На этапе подтверждения номера телефона основная потеря происходит среди mobile-аудитории - почти половина пользователей.  
Рекомендации: проверка процесса подтверждения номера, возможна проблема с конкретным оператором связи.

* С проблемами на этапе знакомства с каталогом блюд в большей степени свойственна для mobile-пользователей. Среди тех, кто подтвердил номер телефона только 68% доходят до каталога блюд.  
Рекомендации: проверить время загрузки страницы каталога, возможно длительное ожидание способствует потере пользователей на этом этапе.




Пользователей приложения можно разбить на 4 группы:


* Самая многочисленная группа 38,4% - это пользователи с 1 заказом, совершенным 4-6 недель назад.  
Рекомендации: необходимо удерживать персональными предложениями, напоминать о неиспользованных бонусах, уведомлять о новинках и акциях.


* Самые неактивные пользователи, их доля 30,5%. Пользователи с 1-2 заказами, совершенными 7-9 нелель назад  
Рекомендации: нужно напоминать о себе рассылками и стимулировать с помощью повышенных скидок.


* Вероятно новые пользователи, доля которых составляет 30,7%. Пользователи с 1 заказом, совершенным 1-3 недели назад.  
Рекомендации: обязательно поддерживать контакт, дарить бонусы или скидки на повторный заказ, просить отзыв за скидку на следующий заказ.


* Пользователи с редкими паттернами поведения, их доля составляют менее 0,6%. Вероятно это самые лояльные клиенты с 2-3 и более дорогими заказами за последние 1,5 месяца.  
Рекомендации: поощрять за активность, предоставлять доступ к эксклюзивным предложениям.

Стремиться конвертировать неактивных и мало лояльных пользователей 1-3 в более ценную категорию 4.

<br>

### ЗАВЕДЕНИЯ

Все заведения, информация о которых представлена в данных, можно разделить на 3 группы:  

<br>
1. Заведения с малым количеством заказов, ограниченным ассортиментом блюд и ценами низкими/средними.

Рекомендации:
* привлечение новых пользователей с помощью скидок на первый заказ
* открытие дополнительных точек в других районах города и привлечение новых клиентов
* при невозможности охвата других районов фокус на увеличение среднего чека путем расширения ассортимента

<br>
2. Заведения с малым количеством заказов, ограниченным ассортиментом блюд и средне-высокими ценами.
  
Рекомендации:
* привлечение новых пользователей с помощью скидок на первый заказ
* расширение ассортимента блюдами средней ценовой категории (подобие топовых блюд конкурентов) для расширения клиентской базы
продвигать свою уникальность, например публикациями о необычных блюдах, стимулировать к первому заказу, например предлагая дегустационные наборы из нескольких блюд

<br>
3. Рестораны с большим объемом заказов, широким ассортиментом блюд, средней ценовой категории.
Популярные рестораны быстрого питания или рестораны многонациональной кухни.

Рекомендации: 
* основной фокус на удержании существующих пользователей путем поощрения эксклюзивными предложениями и накопительными скидками, поддержка интереса онлайн или офлайн мероприятиями
* повышение среднего чека с помощью грамотных рекомендаций в процессе оформления заказа.
